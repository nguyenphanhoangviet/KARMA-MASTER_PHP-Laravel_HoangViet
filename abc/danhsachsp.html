<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div id="listsp"></div>
    </div>
    <script>
      fetch("http://localhost:8000/api/sp")
        .then((response) => response.json())
        .then((data) => {
          let str = `<div class="d-flex justify-content-between fs-6">
              <b class="p-2 border col-md-5">Ten SP</b>
              <b class="p-2 border col-md-2">Giá</b>
              <b class="p-2 border col-md-2 text-end">Ngày cập nhật</b> 
              <b class="p-2 border col-md-3 text-end">Thao tác</b> 
            </div>`;
          data.forEach((sp) => (str += hien1sp(sp)));
          document.querySelector("#listsp").innerHTML = str;
        })
        .catch((error) => console.log("Co loi : \n", error));
      function hien1sp(sp) {
        return `<div class="d-flex justify-content-between fs-6">
              <span class="p-2 border col-md-5">${sp.ten_sp}</span>
              <span class="p-2 border col-md-2">${sp.gia_sp.toLocaleString(
                "vi"
              )} VNĐ</span>
              <span class="p-2 border col-md-2 text-end">${sp.cap_nhat}</span> 
              <span class="p-2 border col-md-3 text-end">
                  <a href="#">Sửa</a>
                   <a href="#" onclick="xoasp(${sp.id})">Xóa</a>
              </span> 
            </div>`;
      }
      function xoasp(id) {
        if (confirm("Xóa sản phẩm này thật không bạn yêu ơi") == false) return;
        fetch(`http://localhost:8000/api/admin/sp/${id}`, { method: "delete" })
          .then((response) => response.text())
          .then((data) => {
            alert("Đã xóa");
            location.reload();
          })
          .catch((error) => console.log("Co loi : \n", error));
      }
    </script>
  </body>
</html>
